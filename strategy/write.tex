\section{Проблема записи данных}

Обычно такая проблема возникает в системах, которые производят анализ больших объемов данных (например аналог Google Analytics). Данные активно пишутся и мало читаются (или читается только суммарный вариант собранных данных).

\subsection{Методы решения}

Один из самых популярных методов решение проблем~--- размазать нагрузку по времени с помощью систем очередей.

\begin{itemize}
  \item \textbf{PgQ}~--- это система очередей, разработанная на базе PostgreSQL. Разработчики~--- компания Skype. Используется в Londiste (подробнее <<\ref{sec:londiste}~\nameref{sec:londiste}>>). Особенности:

  \begin{itemize}
    \item Высокая производительность благодаря особенностям PostgreSQL;
    \item Общая очередь, с поддержкой нескольких обработчиков и нескольких генераторов событий;
    \item PgQ гарантирует, что каждый обработчик увидит каждое событие как минимум один раз;
    \item События достаются из очереди <<пачками>> (batches);
    \item Чистое API на SQL функциях;
    \item Удобный мониторинг;
  \end{itemize}

  \item \textbf{Citus}~--- подробнее можно прочитать в <<\ref{sec:citus}~\nameref{sec:citus}>> главе;
  \item \textbf{Postgres-X2}~--- подробнее можно прочитать в <<\ref{sec:postgres-x2}~\nameref{sec:postgres-x2}>> главе;
  \item \textbf{Postgres-XL}~--- подробнее можно прочитать в <<\ref{sec:postgres-xl}~\nameref{sec:postgres-xl}>> главе;
\end{itemize}
